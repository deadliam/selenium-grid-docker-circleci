# Python CircleCI 2.0 configuration file

workflows:
  version: 2   
  acceptance_tests:
    jobs:
      - chrome-tests:
        working_directory: ~/repo
        docker:
          - image: circleci/python:3.6.3
          - image: selenium/standalone-chrome:3.141.59-iron

        steps:
          - checkout

          - run:
              name: install dependencies
              command: |
                python3 -m venv venv
                . venv/bin/activate
                pip install -r requirements.txt

          - run:
              name: run tests chrome
              command: |
                . venv/bin/activate
                ./run-tests.sh -b chrome -p Tests

      - firefox-tests:
        working_directory: ~/repo
        docker:
          - image: circleci/python:3.6.3
          - image: selenium/standalone-firefox:3.141.59-iron

        steps:
          - checkout

          - run:
              name: install dependencies
              command: |
                python3 -m venv venv
                . venv/bin/activate
                pip install -r requirements.txt

          - run:
              name: run tests firefox
              command: |
                . venv/bin/activate
                ./run-tests.sh -b firefox -p Tests

      - reports:
        requires:
          - chrome-tests
          - firefox-tests
          